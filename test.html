<!DOCTYPE HTML>
<html>
	<head>
		<title>Maze Game</title>
		
		<style>
			#button:hover{
				cursor: pointer;
			}

			/*#cage{
				background-color:#00FF00;
			}*/
		</style>
	</head>
	<body style="margin:0;padding:0">
		<div style="width:700px;height:500px;border:5px solid #000000;margin:0 auto;top:20px;position:relative">
			<canvas id="cage" style="width:100%;height:100%">
			<!--<div id="block" style="top:400px;left:300px;position:relative;width:100px;height:100px;background-color:#0066FF;display:block;z-index:15" ></div>
			<div id="end" style="top:-100px;left:0px;position:relative;width:100px;height:100px;background-color:#FFFF00;display:block;z-index:1"></div>-->
			</canvas>
		</div>
		<script>

			document.onkeydown = checkKey;
			var myX = 0;
			var myY = 16;
		 	var C = 0.8;        // canvas width to viewport width ratio
		    var W_TO_H = 2/1;   // canvas width to canvas height ratio
		    var el = document.getElementById("cage");

		    // For IE compatibility http://www.google.com/search?q=get+viewport+size+js
		    var viewportWidth = window.innerWidth;
		    var viewportHeight = window.innerHeight;

		    var canvasWidth = viewportWidth * C;
		    var canvasHeight = canvasWidth / W_TO_H;
		    el.style.position = "fixed";
		    el.setAttribute("width", canvasWidth);
		    el.setAttribute("height", canvasHeight);
		    el.style.top = (viewportHeight - canvasHeight) / 2;
		    el.style.left = (viewportWidth - canvasWidth) / 2;

			var c=document.getElementById("cage");
			var ctx=c.getContext("2d");
			ctx.fillStyle="#FF0000";
			ctx.fillRect(myX,myY,100,100);

			

			function checkKey(e) {

			    e = e || window.event;

			    //left arrow key
			    if (e.keyCode == '37') {
			    	e.preventDefault();
			    	var l = document.getElementById("block").style.left;
			    	if(parseInt(l, 10) > parseInt("0px", 10)){
			    	    moveLeft();
			    	    checkWin();
			    	}
			    }

			    //right arrow key
			    else if (e.keyCode == '39') {
			    	e.preventDefault();
			    	var l = document.getElementById("block").style.left;
			    	if(parseInt(l, 10) < parseInt("600px", 10)){
			        	moveRight();
			        	checkWin();
			        }
			    }

			    //up arrow key
			    else if(e.keyCode == '38'){
			    	e.preventDefault();
			    	var t = document.getElementById("block").style.top;
			    	if(parseInt(t, 10) > parseInt("0px", 10)){
			    		moveUp();
			    		checkWin();
			    	}
			    }

			    //down arrow key
			    else if(e.keyCode == '40'){
			    	e.preventDefault();
			    	var t = document.getElementById("block").style.top;
			    	if(parseInt(t, 10) < parseInt("400px", 10)){
			    		moveDown();
			    		checkWin();
			    	}
			    }
			}

			function checkWin(){
				if(parseInt(document.getElementById("block").style.left, 10) == parseInt(document.getElementById("end").style.left, 10) && parseInt(document.getElementById("block").style.top, 10) == parseInt(document.getElementById("end").style.top, 10)+100){
					alert("You WIN!");
					history.go(0);
				}
			}
			function moveRight(){
				//var block = document.getElementById("block");
				//var l = document.getElementById("block").style.left;
				//document.getElementById("block").style.left = (parseInt(l,10)+parseInt("100px", 10)+"px");
				ctx.moveTo(myX+100,myY);
				alert("hellur");
			}

			function moveLeft(){
				var l = document.getElementById("block").style.left;
				document.getElementById("block").style.left = (parseInt(l,10) - parseInt("100px", 10)+"px");
			}

			function moveUp(){
				var t = document.getElementById("block").style.top;
				document.getElementById("block").style.top = (parseInt(t, 10) - parseInt("100px", 10)+"px");
			}

			function moveDown(){
				var t = document.getElementById("block").style.top;
				document.getElementById("block").style.top = parseInt(t, 10) + parseInt("100px", 10) + "px";
			}
		</script>
	</body>
</html>